{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brg20\\\\Documents\\\\Study\\\\Web\\\\TicketsStore\\\\react_app\\\\src\\\\pages\\\\AddEventPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Select from 'react-select';\nimport useAuth from '../hooks/use-auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8000/';\nconst AddEventPage = () => {\n  _s();\n  const [name, setName] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [placeId, setPlaceId] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [minAge, setMinAge] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [cities, setCities] = useState([]);\n  const [places, setPlaces] = useState([]);\n  const [city, setCity] = useState({});\n  const [place, setPlace] = useState({});\n  const auth = useAuth();\n  useEffect(() => {\n    const fetchCities = async () => {\n      try {\n        if (cities.length === 0) {\n          const response = await axios.get(`${API_URL}/cities/`);\n          setCities(response.data);\n        }\n      } catch (error) {\n        console.error('Error fetching cities:', error);\n      }\n    };\n    fetchCities();\n  }, [cities.length]);\n  const fetchPlaces = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/placesbycity/${city.value}/`);\n      setPlaces(response.data);\n    } catch (error) {\n      console.error('Error fetching places:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Add Event\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: async e => {\n        e.preventDefault();\n        setError(\"\");\n        try {\n          await axios.post(`${API_URL}/events/`, {\n            name,\n            date,\n            placeId,\n            description,\n            minAge\n          }, {\n            headers: {\n              Authorization: `Bearer ${auth.accessToken}`\n            }\n          });\n          alert(\"Event added successfully\");\n        } catch (error) {\n          if (error.response) {\n            setError(error.response.data);\n          }\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          className: \"basic-single\",\n          classNamePrefix: \"select\",\n          defaultValue: cities[0],\n          isClearable: true,\n          isSearchable: true,\n          name: \"city\",\n          options: cities,\n          onChange: newValue => {\n            setCity(newValue);\n            fetchPlaces();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"basic-single\",\n          classNamePrefix: \"select\",\n          defaultValue: places[0],\n          isClearable: true,\n          isSearchable: true,\n          name: \"place\",\n          options: places,\n          onChange: newValue => {\n            setPlace(newValue);\n          },\n          value: place.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          placeholder: \"Date\",\n          value: date,\n          onChange: e => setDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Description\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(AddEventPage, \"ZFc+a9tudGkpQuosT9dTspl9Ek0=\", false, function () {\n  return [useAuth];\n});\n_c = AddEventPage;\nexport default AddEventPage;\nvar _c;\n$RefreshReg$(_c, \"AddEventPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","Select","useAuth","jsxDEV","_jsxDEV","API_URL","AddEventPage","_s","name","setName","date","setDate","placeId","setPlaceId","description","setDescription","minAge","setMinAge","error","setError","cities","setCities","places","setPlaces","city","setCity","place","setPlace","auth","fetchCities","length","response","get","data","console","fetchPlaces","value","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","e","preventDefault","post","headers","Authorization","accessToken","alert","className","classNamePrefix","defaultValue","isClearable","isSearchable","options","onChange","newValue","type","placeholder","target","_c","$RefreshReg$"],"sources":["C:/Users/brg20/Documents/Study/Web/TicketsStore/react_app/src/pages/AddEventPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Select from 'react-select';\r\nimport useAuth from '../hooks/use-auth';\r\n\r\n\r\nconst API_URL = 'http://localhost:8000/';\r\n\r\nconst AddEventPage = () => {\r\n    const [name, setName] = useState(\"\");\r\n    const [date, setDate] = useState(\"\");\r\n    const [placeId, setPlaceId] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [minAge, setMinAge] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [cities, setCities] = useState([]);\r\n    const [places, setPlaces] = useState([]);\r\n    const [city, setCity] = useState({});\r\n    const [place, setPlace] = useState({});\r\n    const auth = useAuth();\r\n\r\n    useEffect(() => {\r\n        const fetchCities = async () => {\r\n            try {\r\n                if (cities.length === 0) {\r\n                    const response = await axios.get(`${API_URL}/cities/`);\r\n                    setCities(response.data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching cities:', error);\r\n            }\r\n        };\r\n\r\n        fetchCities();\r\n    }, [cities.length]);\r\n\r\n\r\n    const fetchPlaces = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/placesbycity/${city.value}/`);\r\n            setPlaces(response.data);\r\n        } catch (error) {\r\n            console.error('Error fetching places:', error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Add Event</h1>\r\n            <form\r\n                onSubmit={async (e) => {\r\n                    e.preventDefault();\r\n                    setError(\"\");\r\n                    try {\r\n                        await axios.post(\r\n                            `${API_URL}/events/`,\r\n                            {\r\n                                name,\r\n                                date,\r\n                                placeId,\r\n                                description,\r\n                                minAge\r\n                            },\r\n                            {\r\n                                headers: {\r\n                                    Authorization: `Bearer ${auth.accessToken}`\r\n                                }\r\n                            }\r\n                        );\r\n                        alert(\"Event added successfully\");\r\n                    } catch (error) {\r\n                        if (error.response) {\r\n                            setError(error.response.data);\r\n                        }\r\n                    }\r\n                }}\r\n            >\r\n                <div>\r\n                    <Select\r\n                        className=\"basic-single\"\r\n                        classNamePrefix=\"select\"\r\n                        defaultValue={cities[0]}\r\n                        isClearable\r\n                        isSearchable\r\n                        name=\"city\"\r\n                        options={cities}\r\n                        onChange={(newValue) => {\r\n                            setCity(newValue);\r\n                            fetchPlaces();\r\n                        }}\r\n                    />\r\n                    <Select\r\n                        className=\"basic-single\"\r\n                        classNamePrefix=\"select\"\r\n                        defaultValue={places[0]}\r\n                        isClearable\r\n                        isSearchable\r\n                        name=\"place\"\r\n                        options={places}\r\n                        onChange={(newValue) => {\r\n                            setPlace(newValue);\r\n                        }}\r\n                        value={place.name}\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Name\"\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                    <input\r\n                        type=\"date\"\r\n                        placeholder=\"Date\"\r\n                        value={date}\r\n                        onChange={(e) => setDate(e.target.value)}\r\n                    />\r\n                    <input\r\n                        type=\"text\" \r\n                        placeholder=\"Description\"\r\n                        value={description}\r\n                        onChange={(e) => setDescription(e.target.value)}\r\n                    />\r\n                </div>    \r\n                </form>\r\n        </div>\r\n    );\r\n                \r\n    \r\n}\r\n\r\nexport default AddEventPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}