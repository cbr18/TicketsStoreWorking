{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brg20\\\\Documents\\\\Study\\\\Web\\\\TicketsStore\\\\react_app\\\\src\\\\pages\\\\AddPlacePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport useAuth from '../hooks/use-auth';\nimport CreatableSelect from 'react-select/creatable';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8000/';\nconst AddPlacePage = () => {\n  _s();\n  const auth = useAuth();\n  const [name, setName] = useState('');\n  const [city, setCity] = useState({});\n  const [address, setAddress] = useState('');\n  const [capacity_standings, setCapacity] = useState(0);\n  const [capacity_seats, setSeats] = useState(0);\n  const [error, setError] = useState('');\n  const [cities, setCities] = useState([]);\n  useEffect(() => {\n    const fetchCities = async () => {\n      try {\n        if (cities.length === 0) {\n          const response = await axios.get(`${API_URL}/cities/`);\n          setCities(response.data);\n        }\n      } catch (error) {\n        console.error('Error fetching cities:', error);\n      }\n    };\n    fetchCities();\n  }, [cities.length]);\n  const handleSubmit = async e => {\n    console.log({\n      name,\n      city,\n      address,\n      capacity_standings,\n      capacity_seats\n    });\n    e.preventDefault();\n    setError('');\n    try {\n      await axios.post(`${API_URL}/places/`, {\n        name,\n        city: city.label,\n        address,\n        capacity_standings,\n        capacity_seats\n      }, {\n        headers: {\n          Authorization: `Bearer ${auth.accessToken}`\n        }\n      });\n      alert('Place added successfully');\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 16\n      }, this);\n    } catch (error) {\n      if (error.response) {\n        setError(error.response.data);\n        console.error('Error:', error.response.data);\n        console.error('Status:', error.response.status);\n      } else {\n        setError('An unknown error occurred');\n        console.error('Error:', error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Add Place\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CreatableSelect, {\n        options: cities,\n        value: city,\n        onChange: value => setCity(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Address:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: address,\n          onChange: e => setAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Capacity:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: capacity_standings,\n          onChange: e => setCapacity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Seats:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: capacity_seats,\n          onChange: e => setSeats(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Add Place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(AddPlacePage, \"beTQZocuUaJ2DMGx2RlsNetE5ls=\", false, function () {\n  return [useAuth];\n});\n_c = AddPlacePage;\nexport default AddPlacePage;\nvar _c;\n$RefreshReg$(_c, \"AddPlacePage\");","map":{"version":3,"names":["React","useEffect","useState","axios","useAuth","CreatableSelect","Navigate","jsxDEV","_jsxDEV","API_URL","AddPlacePage","_s","auth","name","setName","city","setCity","address","setAddress","capacity_standings","setCapacity","capacity_seats","setSeats","error","setError","cities","setCities","fetchCities","length","response","get","data","console","handleSubmit","e","log","preventDefault","post","label","headers","Authorization","accessToken","alert","to","fileName","_jsxFileName","lineNumber","columnNumber","status","children","style","color","onSubmit","type","value","onChange","target","options","_c","$RefreshReg$"],"sources":["C:/Users/brg20/Documents/Study/Web/TicketsStore/react_app/src/pages/AddPlacePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport useAuth from '../hooks/use-auth';\r\nimport CreatableSelect from 'react-select/creatable';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\n\r\nconst API_URL = 'http://localhost:8000/';\r\n\r\n\r\n\r\nconst AddPlacePage = () => {\r\n  const auth = useAuth();\r\n  const [name, setName] = useState('');\r\n  const [city, setCity] = useState({});\r\n  const [address, setAddress] = useState('');\r\n  const [capacity_standings, setCapacity] = useState(0);\r\n  const [capacity_seats, setSeats] = useState(0);\r\n  const [error, setError] = useState('');\r\n  const [cities, setCities] = useState([]);\r\n  \r\n\r\nuseEffect(() => {\r\n  const fetchCities = async () => {\r\n    try {\r\n      if (cities.length === 0) {\r\n        const response = await axios.get(`${API_URL}/cities/`);\r\n        setCities(response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching cities:', error);\r\n    }\r\n  };\r\n\r\n  fetchCities();\r\n}, [cities.length]);\r\n  \r\n  const handleSubmit = async (e) => {\r\n          console.log({\r\n              name,\r\n              city,\r\n              address,\r\n              capacity_standings,\r\n              capacity_seats\r\n          });\r\n    e.preventDefault();\r\n    setError('');\r\n      try {\r\n      await axios.post(\r\n        `${API_URL}/places/`,\r\n        {\r\n          name,\r\n          city: city.label,\r\n          address,\r\n          capacity_standings,\r\n          capacity_seats\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${auth.accessToken}`\r\n          }\r\n        }\r\n        );\r\n        alert('Place added successfully');\r\n        return <Navigate to=\"/\" />\r\n    } catch (error) {\r\n      if (error.response) {\r\n        setError(error.response.data);\r\n        console.error('Error:', error.response.data);\r\n        console.error('Status:', error.response.status);\r\n\r\n      } else {\r\n        setError('An unknown error occurred');\r\n        console.error('Error:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {error && <div style={{ color: 'red' }}>{error}</div>}\r\n      <h1>Add Place</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          Name:\r\n          <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} />\r\n        </label>\r\n        <CreatableSelect\r\n          options={cities}\r\n          value={city}\r\n          onChange={value => setCity(value)}\r\n        />\r\n        <label>\r\n          Address:\r\n          <input type=\"text\" value={address} onChange={(e) => setAddress(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          Capacity:\r\n          <input type=\"number\" value={capacity_standings} onChange={(e) => setCapacity(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          Seats:\r\n          <input type=\"number\" value={capacity_seats} onChange={(e) => setSeats(e.target.value)} />\r\n        </label>\r\n        <button type=\"submit\">Add Place</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddPlacePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}